Algo à implémenter :

//requète classe

    requète modification attirbution classe (IdProf,IdClasse) :
        recuperer type requète
        idenfiter
        si admin :
            si Idprof et Iclasse défini :
                push en bdd
            end
            sinon :
                renvoyer erreur
        end
        sinon :
            renvoyer pas perm
        end

    requète info (opt IdProf): //faire pour 1 élève particulier?
        recuperer type requète
        idenfiter
        si connecte:
            si IdProf défini:
                requète bdd pour avoir classe du prof
                renvoyer resultat
            end
            sinon:
                requète bdd pour avoir toutes les classe
                renvoyer resultat
            end
        end
        sinon :
            renvoyer vers connection
        end
    
    requète création classe (Nom):
        recuperer typer requète
        identifier
        si admin:
            requète rajoute classe
            enovyer bien passé
        end
        sinon :
            envoyer pas perm
        end

    requète création classe (IdClasse):
        recuperer typer requète
        identifier
        si admin:
            supprimer classe
            supprimer dans table many to many les lien avec prof
            update élève pour passe colone id class à Null
            enovyer bien passé
        end
        sinon :
            envoyer pas perm
        end

    /*à faire requète : 
        -Afficher avec option de trie nbr_eleve, nom //demadner ce qu'il veut comme trie exactement
    */

//requète prof
    requète pour modif prof (Nom, Prenom, Email):
        recupèrer type requète
        identifier
        si connecter :
            reprend IdProf en session
            si Nom, Prenom, Email, Mdp Ok :
                update données
            end
            sinon :
                renvoyer erreur
            end
        end

    requète pour renvoyer info prof (opt IdProf):
        recupèrer type requète
        identifier
        recuperer IdProf en sessions ou prend celui en param
        si connecter :
            revnoyer donné prof
        end

    requête création de compte prof (Email, Nom, Prenom, Mdp): //traité à part car ajoute de compte un peu spécial et même connection en général
        recuperer requète
        traiter que c'est création de compte
        verifier que toutes les informations sont présente
        si tout info présente alors :
            requète bdd pour ajouter prof
            renvoie que tout a été ok
        end
        sinon :
            dire que manque données
        end

    requète suppresion prof (IdProf):
        recuperer requète
        identifier
        si admin :
            si IdProf déifini et IdProf!=$_SESSION['IdProf]:
                requète suppression prof
                requète suppresion lien many to many pour prof
                requète suppresion test du prof
                envoyer tout bien passé
            end
            sinon :
                envoyer erreur IdProf pas defini
            end
        end
        sinon :
            envoyer pas perm
        end

//requète éleve
    requète modification élève (IdEleve, Nom, Prenom, IdClasse, Année):
        recupèrer type requète
        identifier
        si admin :
            recuperer info sur l'élève
            si toutes infos sont présent :
                modifier en base données
            end
            sinon :
                renvoyer erreur
            end
        end
        sinon :
            renvoyer erreur pas admin
        end

    requète info élève (opt IdEleve):
        recuperer type requète
        idenfiter
        si connecté :
            si IdEleve défini :
                requète bdd pour avoir l'élève en quesiton
                renvoyer en json
            end
            sinon :
                requète pour tous les élèves
                renvoyer en json //voir comment ça scale avec beaucoup élève
            end
        end
        sinon :
            renvoyé pas connecte
        end

    Lecture du fichier de l'école (Fichier): //fonction sert à prendre tous les élève d'un fichier .csv et ensuite les import dans la bdd
        Transfert fichier vers serveur
        si Transfert ok :
            Ouverture fichier
            créer tableau correspodance nom classe -> id classe
            var erreur
            si Ouverture ok :
                tant que pas fin de fichier :
                    Lire ligne ou colonne
                    regarder nom class.
                        si dans tableau correspondance :
                            prendre Idclasse pour push dans bdd
                        end
                        sinon :
                            requète bdd pour verifier si class existe.
                            si existe :
                                définir id class de élève par rapport à la requète bdd
                                rajouté dans tableau correspondance nom actule -> id classe
                            end
                            sinon :
                                définir id null
                                erreur=true
                            end
                        end
                        si erreur == true :
                            renvoyer vers page modificaiton manuel //gérer dans cette page que on mets premier ce qui n'ont pas de classe
                        end
                    push dans array/bdd
                end 
                fermer fichier
            end
            sinon afficher erreur Ouverture
        sinon afficher erreur Transfert
        delete fichier

    requète encodage manuel (Nom, Preno, Classe, Année):
        traiter requète pour savoir le type encodage
        si Nom, Prenom, Class, Année est définit :
            requète pour ajouter élève
            renvoyer ok
        end
        sinon :
            renvoyer que manque données.
        end

    requète suppression élève (IdEleve):
        recuperer type de requète
        idenfiter
        si admin :
            si IdEleve défini
                Supprimer éleve
                supprimer test en relation
                renvoyer réussi
            end
            sinon :
                dire erreur IdEleve pas défini
            end
        end
        sinon :
            dire pas perm
        end

//requte contact
    /*
        requète à faire :
            -afficher
            -ajouter
            -supprimer
            -envoie test ? compliqué car stock que résultat
    */
//requète test
    requète recupération test (opt IdEleve, opt Idprof): //pour faire requète sur prof mettre le premier à null
        recuperer type requète
        idenfiter
        si IdEleve ok :
            si connecte :
                requète bdd pour avoir résultat pour l'élève
                renvoyer résultat
            end
            sinon :
                enovyer vers connection
            end
        end

        si IdEleve==null et IdProf défini:
            si admin:
                requète bdd pour avoir test du prof en décroissant
                renvoyer resultat
            end
            sinon :
                requète bdd pour IdProf en session //pour pas que prof aye accès au test d'autre prof
                renvoyer résultat
            end
        end

        sinon:
            si connecte :
                requète bdd pour avoir résultat pour tous les élèves par Id décroissant
                renvoyer résultat en json
            end
            sinon :
                enovyer vers connection
            end
        end

    requète ajout test (IdEleve, scores):
        recuperer type requète
        idenfiter
        si connecte :
            recupère Idprof en session
            si IdEleve, IdProf + score ok :
                push vers bdd
            end
            sinon:
                renvoyé erreur
            end
        end
        sinon :
            renvoyé que pas connecter
        end

    requète suppression (IdTest):
        recuperer type requète
        idenfiter:
        si admin:
            requète bdd supprimer test
            enovyer succès
        end
        sinon:
            si IdProf==$_SESSION['IdPorf']:
                requète bdd supprimer test
                envoye succès
            end
            sinon:
                erreur pas permision
            end
        end
    /* à faire requète
        -trier ? pas date ? à clarifier
    */

//requète fiche info
    /*
    faire :
        -recup info
        -update si perm

    */


//requète autre

    requète connection (Identifant, mdp) :
        recupère requête
        traiter que c'est une requète connection
        si email/identifiant et mdp même que dans bdd alors : //email pas obligatoire comme identifiant différent
            stocker en var session Id //ainsi si empty, on sait que n'est pas connecté
            renvoyer ok
        end
        sinon :
            renovyer erreur connection
        end

    requète déconnection :
        supprimer session
        renvoyer que a été déconecter


//script autre
script pour désalouer prof : //sert à désalouer prof aprèsn année scollaire
    regarder date tous les jours à 3H du mat
    si date = 1er aout :
        vider tableau class-prof
        enovyer email à admin pour dire realouer prof
        définir nouvelle date dans 1 ans
    end


//patern default requête :

recuperer requête :
    traiter requète pour savoir autorisation reqise
    si pas besoin connection alors :
        renvoie directe des informations //sert si on stock des articles ou info en bdd pour savoir les modifiers facilement
        //servira surtout si veut pas faire editeur de texte en ligne pour les 
        //même si veut pas stocker txt en bdd et stock que lien vers un emplacement hdd avec le bonne info
    end
    si connecter alors : //si reqête demande être connecte genre pour avoir liste de ces élève
        requète bdd pour identifier la personne
        si permision accepter alors :
            faire requète voulu
            reprendre info
            encode en json
            renvoyer en json
        end
        sinon :
            informé que accès impossible ou juste rien renvoyer
        end
    end
    sinon :
        renvoyer vers page connection pour connecter
    end




/*



prioité n école
donc faire bdd externe
compte super admin pour ajouter école
créer user de l'école MySQL
créer bdd de l'école
stocker en bdd nom école + mdp bdd.
pour stocker mdp chiffre, repdrendre projet cryptage symétrique

compte :
    -Id
    -Email
    -Mdp
    -Admin

école :
    -Id
    -Identifiant
    -Nom
    -MdpChiffré en symétrique


également faire bdd pour pesonne contact
doit avoir 
    -Id
    -IdCompte
    -Nom
    -Prenom
    -Professionel
    -Description

artices :
    -Id
    -Nom
    //texte stocker dans un fichier externe avec même nom et de type Json

*/
